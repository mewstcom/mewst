<%= render Navbars::NavbarComponent.new %>

<div class="mt-3 container">
  <h1 class="fw-bold">
    <%= t("nouns.edit_profile") %>
  </h1>

  <%= form_with model: @profile, url: settings_profile_path do |f| %>
    <%= render Cards::FormErrorsCardComponent.new(errors: f.object.errors) %>

    <div class="mb-3">
      <%= f.label :idname, class: "form-label" %>
      <%= f.text_field :idname, {
        autofocus: true,
        class: "form-control"
      } %>
    </div>

    <div class="mb-3">
      <%= f.label :name, class: "form-label" %>
      <%= f.text_field :name, {
        class: "form-control"
      } %>
    </div>

    <div class="mb-3">
      <%= f.label :description, class: "form-label" %>
      <%= f.text_area :description, {
        class: "form-control",
        data: { controller: "autosize" },
        rows: 3
      } %>
    </div>

    <div class="mb-3">
      <%= f.label :locale, class: "form-label" %>
      <% options = options_for_select([[t("nouns.english"), "en"], [t("nouns.japanese"), "ja"]], @profile.locale) %>
      <%= f.select :locale, options, {}, { class: "form-control" } %>
    </div>

    <div class="mb-3">
      <%= f.label :avatar, class: "form-label" %>
      <%= f.hidden_field :avatar, value: f.object.cached_avatar_data %>
      <%= f.file_field :avatar, {
        class: "form-control"
      } %>
    </div>

    <div class="mb-3">
      <label class="form-label">
        <%= t("nouns.current_avatar") %>
      </label>

      <div>
        <%= render Images::AvatarImageComponent.new(profile: @profile, width: 50) %>
      </div>
    </div>

    <%= f.button class: "btn btn-primary", type: :submit do %>
      <%= t("verbs.update") %>
    <% end %>
<% end %>
</div>
