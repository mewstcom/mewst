<% if @form.errors.any? %>
  <turbo-stream action="after" target="profiles-<%= @form.atname %>-follow">
    <template>
      <%= dispatch_to_flash_toast(type: "alert", message: @form.errors.full_messages.first) %>
    </template>
  </turbo-stream>
<% else %>
  <turbo-stream action="update" target="profiles-<%= @profile.atname %>-follow">
    <template>
      <%= render Buttons::FollowButtonComponent.new(target_profile: @profile, follow_checker: @follow_checker) %>
    </template>
  </turbo-stream>

  <turbo-stream action="update" target="profiles-<%= @profile.atname %>-follow-with-avatar">
    <template>
      <%= render Buttons::FollowButtonWithAvatarComponent.new(target_profile: @profile, follow_checker: @follow_checker, avatar_width: 50) %>
    </template>
  </turbo-stream>
<% end %>
