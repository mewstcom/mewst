<%= render Navbars::NavbarComponent.new %>

<div class="container py-3 u-flat u-narrow">
  <%= render Navs::SettingsNavComponent.new %>

  <div class="mt-3">
    <h1 class="fw-bold">
      <%= t("nouns.connected_accounts") %>
    </h1>

    <div class="card mt-3">
      <div class="card-body">
        <div class="gx-3 row">
          <div class="col-auto">
            <i class="bi bi-twitter"></i>
          </div>

          <div class="col">
            Twitter

            <div class="mt-3">
              <% if current_profile!.twitter_account.present? %>
                <%= button_to t("verbs.disconnect"), settings_twitter_account_path, class: "btn btn-link", data: { disable_with: t("messages.twitter_accounts.disconnecting") }, method: :delete %>
              <% else %>
                <%= form_with data: { turbo: false }, model: @twitter_authorization, url: settings_twitter_authorization_path do |f| %>
                  <label class="form-label">
                    <%= t("messages.twitter_authorization.usages") %>
                  </label>

                  <div class="form-check">
                    <%= f.check_box :cross_post_usage, class: "form-check-input" %>
                    <%= f.label :cross_post_usage, class: "form-check-label" %>
                  </div>

                  <div class="form-check">
                    <%= f.check_box :find_friends_usage, class: "form-check-input" %>
                    <%= f.label :find_friends_usage, class: "form-check-label" %>
                  </div>

                  <div class="mt-2">
                    <%= f.button class: "btn btn-primary", type: :submit do %>
                      <%= t("verbs.connect") %>
                    <% end %>
                  </div>
                <% end %>
              <% end %>
            </div>
          </div>

          <div class="col-auto">
            <% if current_profile!.twitter_account.present? %>
              <i class="bi bi-check-circle-fill"></i>

              <span class="ms-1">
                <%= t("messages.connected_accounts.connected") %>
              </span>

              @<%= current_profile!.twitter_account.username %>
            <% else %>
              <i class="bi bi-info-circle-fill"></i>

              <span class="ms-1">
                <%= t("messages.connected_accounts.not_connected") %>
              </span>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
